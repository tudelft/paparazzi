<airframe name="AR_target">

  <firmware name="rotorcraft">
    <!-- ****************** Autopilot Target ******************* -->
    <target name="ap" board="px4fmu_4.0_chibios">
      <define name="FLASH_MODE" value="PX4_BOOTLOADER"/>
      <configure name="PERIODIC_FREQUENCY" value="500"/>

      <!-- <module name="radio_control" type="datalink"/>-->
      <module name="radio_control" type="sbus">
        <define name="RADIO_CONTROL_NB_CHANNEL" value="16"/>
        <define name="RADIO_KILL_SWITCH" value="5"/>
        <define name="RADIO_PIVOT_SWITCH" value="6"/>
        <define name="RADIO_SERVO" value="7"/>
      </module>

    </target>

	  <!-- ****************** Simulation Target ****************** -->
    <target name="nps"          board="pc">
      <module name="fdm" type="jsbsim"/>
      <module name="udp"/>
      <module name="radio_control" type="datalink"/>
      <module name="logger_file">
        <define name="FILE_LOGGER_PATH" value="home/ewoud"/>
      </module>

      <!--Switch advanced INDI scheduling functions on or off-->
      <!--Take the mode channel for simulation-->
      <define name="INDI_FUNCTIONS_RC_CHANNEL" value="4"/>
      <define name="RADIO_PIVOT_SWITCH" value="FALSE"/>
    </target>


    <!-- ****************** Common to both ********************* -->
    <!-- <module name="gps" type="ubx_ucenter"/> -->

    <module name="tlsf"/>
    <module name="pprzlog"/>
    <module name="logger" type="sd_chibios"/>
    <module name="flight_recorder"/>
    <define name="SDLOG_AUTO_FLUSH_PERIOD" value="1" unit="s"/>


    <!--
    <module name="pwm_meas">
      <define name="USE_PWM_INPUT1" value="PWM_PULSE_TYPE_ACTIVE_LOW"/>
      <define name="USE_PWM_INPUT2" value="PWM_PULSE_TYPE_ACTIVE_LOW"/>
    </module>																						-->

    <module name="actuators" type="pwm">
      <define name="SERVO_HZ" value="400"/>
      <!--define name="USE_SERVOS_7AND8"/-->
    </module>

    <!-- <module name="mag" type="ist8310">
      <configure name="MAG_IST8310_I2C_DEV" value="i2c1"/>
      <define name="MODULE_IST8310_UPDATE_AHRS"/>
      <define name="IST8310_CHAN_X" value="0"/>
      <define name="IST8310_CHAN_Y" value="1"/>
      <define name="IST8310_CHAN_Z" value="2"/>
      <define name="IST8310_CHAN_X_SIGN" value="+"/>
      <define name="IST8310_CHAN_Y_SIGN" value="+"/>
      <define name="IST8310_CHAN_Z_SIGN" value="+"/>
      <define name="MPU9250_MAG_PRESCALER" value="32768"/>
      <define name="IST8310_MAG_TO_IMU_PHI" value="RadOfDeg\(0\)"/>
      <define name="IST8310_MAG_TO_IMU_THETA" value="RadOfDeg\(90\)"/>
      <define name="IST8310_MAG_TO_IMU_PSI" value="RadOfDeg\(0\)"/>
    </module> -->


    <!-- <module name="mag" type="hmc58xx">
      <configure name="MAG_HMC58XX_I2C_DEV" value="i2c1"/>
      <define name="MODULE_HMC58XX_UPDATE_AHRS"/>
      <define name="HMC58XX_CHAN_X" value="1"/>
      <define name="HMC58XX_CHAN_Y" value="0"/>
      <define name="HMC58XX_CHAN_Z" value="2"/>
      <define name="HMC58XX_CHAN_X_SIGN" value="-"/>
      <define name="HMC58XX_CHAN_Y_SIGN" value="+"/>
      <define name="HMC58XX_CHAN_Z_SIGN" value="+"/>
      <define name="MPU9250_MAG_PRESCALER" value="32768"/>
      <define name="HMC58XX_MAG_TO_IMU_PHI" value="RadOfDeg\(6.5\)"/>
      <define name="HMC58XX_MAG_TO_IMU_THETA" value="RadOfDeg\(28.5\)"/>
      <define name="HMC58XX_MAG_TO_IMU_PSI" value="RadOfDeg\(181.0\)"/>
    </module> -->

    <!--<module name="send_imu_mag_current">
      <define name="MILLIAMP_AT_IDLE_THROTTLE" value="1000"/>
      <define name="MILLIAMP_AT_FULL_THROTTLE" value="30000"/>
      <define name="CURRENT_ESTIMATION_NONLINEARITY" value="1.5"/>
    </module>-->

    <module name="sys_mon"/>

    <!--    <module name="telemetry" type="transparent"/>				-->

    <module name="telemetry" type="transparent">
      <configure name="MODEM_PORT" value="UART3"/>
      <!-- <configure name="MODEM_BAUD" value="B57600"/> -->
      <configure name="MODEM_BAUD" value="B115200"/>
    </module>

    <module name="imu" type="mpu9250_spi">
      <configure name="IMU_MPU9250_SPI_DEV" value="spi1"/>
      <configure name="IMU_MPU9250_SPI_SLAVE_IDX" value="SPI_SLAVE2"/>
      <define name="IMU_MPU9250_READ_MAG" value="TRUE"/>
      <define name="IMU_MPU9250_GYRO_RANGE" value="MPU9250_GYRO_RANGE_2000" /> <!-- Added this -->
      <define name="IMU_MPU9250_ACCEL_RANGE" value="MPU9250_ACCEL_RANGE_16G" />
    </module>

    <!--module name="servo_tester"/-->

    <module name="air_data">
      <define name="USE_AIRSPEED_AIR_DATA" value="FALSE"/>
    </module>

    <module name="stabilization" type="indi">
      <configure name="INDI_NUM_ACT" value="6"/>
    </module>

    <!-- <module name="gps" type="datalink"/> -->

    <!-- <module name="ahrs" type="int_cmpl_quat">
    <configure name="USE_MAGNETOMETER" value="FALSE"/>
    <define name="AHRS_USE_GPS_HEADING" value="TRUE"/>
    <define name="AHRS_GRAVITY_UPDATE_COORDINATED_TURN" value="TRUE"/>
    <define name="AHRS_GPS_SPEED_IN_NEGATIVE_Z_DIRECTION" value="TRUE"/>
    <define name="AHRS_HEADING_UPDATE_GPS_MIN_SPEED" value="0"/>
    </module>
    <module name="ins" type="extended">
      <define name="INS_USE_GPS_ALT" value="1"/>
      <define name="INS_USE_GPS_ALT_SPEED" value="1"/>
      <define name="INS_VFF_R_GPS" value="0.01"/>
    </module> -->

    <module name="gps" type="ublox">
      <configure name="GPS_BAUD" value="B460800"/>
    </module>

   <module name="ins" type="ekf2"/>

    <!-- <module name="ins" type="float_invariant">
      <define name="INS_PROPAGATE_FREQUENCY" value="500"/>
      <define name="INS_FINV_MAG_ID" value="MAG_HMC58XX_SENDER_ID"/>
      <define name="INS_EKF2_MAG_ID" value="MAG_RM3100_SENDER_ID"/>
    </module> -->

    <!-- Control effectiveness calculator that calculates
    	 the control effectiveness matrix on the fly	 -->

    <module name="geo_mag"/>
    <!--module name="tailsitter_auto_takeoff">
      <define name="TAKEOFF_Q_GAIN" value="10.0"/>
    </module-->




    <!-- ******************************************************* -->
  </firmware>

  <servos driver="Pwm">
    <servo name="TILT_LEFT" no="0" min="2300" neutral="1700" max="1100"/>
    <servo name="TILT_RIGHT" no="1" min="750" neutral="1350" max="1950"/>
    <servo name="RM" no="2" min="1000" neutral="1150" max="1900"/>
    <servo name="LM" no="3" min="1000" neutral="1150" max="1900"/>
    <servo name="AIL_LEFT" no="4" min="1100" neutral="1500" max="1900"/>
    <servo name="AIL_RIGHT" no="5" min="1200" neutral="1600" max="2000"/>
    <!--servo name="SERVO_TEST" no="0" min="2160" neutral="1560" max="960"/-->
  </servos>

  <!-- <auto_rc_commands> -->
    <!-- To still be able to use rudder in auto mode, which is handy with sidewind landing in auto1 stabilization mode only YAW
    Handy if in auto1 for sidewind stabilized crabbing landing, also for steering if someting not OK with course gains in Autonomous flight
    TODO disable again after strong wind sidewind autolanding is 100% tuned
      Note that in auto2 mode the Flap and Gear are after test then controlable by flightplan conditions e.g landng block extend gear and flap -->
      <!--  <set command="ZAP" value="@YAW"/> --> <!-- TODO: Diable later -->
    <!-- <set command="GEAR" value="@GEAR"/> --> <!-- Can be Used for logging start/stop -->
    <!-- <set command="FLAP" value="@FLAP"/> -->

    <!-- To be able to set gain values via RC Transmitter these ones below.
    This way the can keep his eye on a fast moving plane and set somegain values
    makes life of a single testpiloted AC much easier -->
    <!--
    <set command="GAIN1"    value="@GAIN1"/>
    <set command="CALIB"    value="@CALIB"/> -->
  <!--  </auto_rc_commands> -->

  <commands>
    <axis name="PITCH" failsafe_value="0"/>
    <axis name="ROLL" failsafe_value="0"/>
    <axis name="YAW" failsafe_value="0"/>
    <axis name="THRUST" failsafe_value="0"/>
  </commands>


  <command_laws>
    <set servo="TILT_LEFT" value="autopilot.motors_on ? actuators_pprz[0] : 0"/>
    <set servo="TILT_RIGHT" value="autopilot.motors_on ? actuators_pprz[1] : 0"/>
    <set servo="RM" value="autopilot.motors_on ? actuators_pprz[2] : -MAX_PPRZ"/>
    <set servo="LM" value="autopilot.motors_on ? actuators_pprz[3] : -MAX_PPRZ"/>
    <set servo="AIL_LEFT" value="terminate_flight ? 3000 : (autopilot.motors_on ? actuators_pprz[4] : 0)"/>
    <set servo="AIL_RIGHT" value="terminate_flight ? -3000 : (autopilot.motors_on ? actuators_pprz[5] : 0)"/>
  </command_laws>

  <section name="IMU" prefix="IMU_">

    <!-- <define name="MPU_CHAN_X" value="2"/>
    <define name="MPU_CHAN_Y" value="1"/>
    <define name="MPU_CHAN_Z" value="0"/>
    <define name="MPU_X_SIGN" value="1"/>
    <define name="MPU_Y_SIGN" value="1"/>
    <define name="MPU_Z_SIGN" value="-1"/> -->

    <!-- IMU calibration, make sure to calibrate the IMU properly before flight, see the wiki for more info-->
    <!-- <define name="MAG_X_NEUTRAL" value="-37"/>
    <define name="MAG_Y_NEUTRAL" value="299"/>
    <define name="MAG_Z_NEUTRAL" value="197"/>
    <define name="MAG_X_SENS" value="7.25691459037" integer="16"/>
    <define name="MAG_Y_SENS" value="7.7018409319" integer="16"/>
    <define name="MAG_Z_SENS" value="8.16601148911" integer="16"/> -->

    <!-- First Calibration -->
    <!-- <define name="MAG_X_NEUTRAL" value="215"/>
    <define name="MAG_Y_NEUTRAL" value="316"/>
    <define name="MAG_Z_NEUTRAL" value="174"/>
    <define name="MAG_X_SENS" value="7.777133705586911" integer="16"/>
    <define name="MAG_Y_SENS" value="7.872914622750806" integer="16"/>
    <define name="MAG_Z_SENS" value="7.381622435447413" integer="16"/> -->

    <define name="MAG_X_NEUTRAL" value="211"/>
    <define name="MAG_Y_NEUTRAL" value="309"/>
    <define name="MAG_Z_NEUTRAL" value="130"/>
    <define name="MAG_X_SENS" value="7.697406436475285" integer="16"/>
    <define name="MAG_Y_SENS" value="7.958512154144208" integer="16"/>
    <define name="MAG_Z_SENS" value="7.589262406904852" integer="16"/>


    <!-- Apparently do not need the following because of 'geo_mag' module -->
    <!-- <define name= "MAG_X_CURRENT_COEF" value="0.001455"/>
    <define name= "MAG_Y_CURRENT_COEF" value="0.012152"/>
    <define name= "MAG_Z_CURRENT_COEF" value="-0.0001088"/> -->

    <!--Mag of gps-->
    <!-- <define name="MAG_X_NEUTRAL" value="21"/>
    <define name="MAG_Y_NEUTRAL" value="-206"/>
    <define name="MAG_Z_NEUTRAL" value="104"/>
    <define name="MAG_X_SENS" value="3.58153558634" integer="16"/>
    <define name="MAG_Y_SENS" value="3.58800117886" integer="16"/>
    <define name="MAG_Z_SENS" value="3.57182532939" integer="16"/> -->

    <!-- <define name="BODY_TO_IMU_PHI" value="2.223" unit="deg"/> -->
    <define name="BODY_TO_IMU_PHI" value="0.75" unit="deg"/> <!-- 0.33 0.75-->
    <define name="BODY_TO_IMU_THETA" value="89.8" unit="deg"/>
    <define name="BODY_TO_IMU_PSI" value="0" unit="deg"/>
  </section>

  <!-- <section name="AUTOPILOT">
    <define name="MODE_MANUAL" value="AP_MODE_ATTITUDE_DIRECT"/>
    <define name="MODE_AUTO1" value="AP_MODE_FORWARD"/>
    <define name="MODE_AUTO2" value="AP_MODE_NAV"/>
    <define name="MODE_STARTUP" value="AP_MODE_NAV"/>
  </section> -->

  <section name="AUTOPILOT">
    <define name="MODE_MANUAL" value="AP_MODE_ATTITUDE_DIRECT"/>
    <define name="MODE_AUTO1" value="AP_MODE_FORWARD"/>
    <define name="MODE_AUTO2" value="AP_MODE_NAV"/>
    <define name="MODE_STARTUP" value="AP_MODE_NAV"/>
  </section>

  <section name="BAT">
    <define name="MAX_BAT_CAPACITY" value="3300" unit="mAh"/>
    <define name="MILLIAMP_AT_IDLE_THROTTLE" value="280" unit="mA"/><!-- We substract ESC selfusage+AP+telemetry max-->
    <define name="MILLIAMP_AT_FULL_THROTTLE" value="3300" unit="mA"/><!--at max volts-->
    <define name="MAX_BAT_LEVEL" value="16.8" unit="V"/>
    <define name="LOW_BAT_LEVEL" value="14.0" unit="V"/>
    <define name="CRITIC_BAT_LEVEL" value="13.5" unit="V"/>
    <define name="CATASTROPHIC_BAT_LEVEL" value="13.2" unit="V"/>
  </section>

  <section name="STABILIZATION_ATTITUDE" prefix="STABILIZATION_ATTITUDE_">
    <!-- setpoints -->
    <define name="SP_MAX_PHI" value="60." unit="deg"/>
    <define name="SP_MAX_THETA" value="60." unit="deg"/>
    <define name="SP_MAX_R" value="90." unit="deg/s"/>
    <define name="DEADBAND_R" value="250"/>
    <define name="DEADBAND_A" value="250"/>
    <define name="SP_PSI_DELTA_LIMIT" value="90" unit="deg"/>
  </section>

  <section name="STABILIZATION_ATTITUDE_INDI" prefix="STABILIZATION_INDI_">
    <!-- control effectiveness, scaled by INDI_G_SCALING (1000)-->
    <!-- Actuators					 tilt_l tilt_r  m_r  m_l						-->
    <define name="G1_ROLL"   value="{   0.0,   0.0, -6.705,  6.705,   0.0,   0.0}"/>
    <define name="G1_PITCH"  value="{ 1.755, 1.755,    0.0,    0.0,  -4.0,   4.0}"/>
    <define name="G1_YAW"    value="{-0.878, 0.878,    0.0,    0.0,  -2.0,  -2.0}"/>
    <define name="G1_THRUST" value="{   0.0,   0.0,   -1.3,   -1.3,   0.0,   0.0}"/>
    <!--Counter torque effect of spinning up a rotor-->
    <define name="G2" value="{0, 0, 0, 0, 0, 0}"/> <!--Edited to have 1 more zero to account for another actuator-->

    <!-- reference acceleration for attitude control     (You have a screenshot on 2022-10-18 ~21:15 with values from Valkenburg) -->
    <define name="REF_ERR_P" value="90"/> <!-- 100 believe Valkenburg was 100, 70-->
    <define name="REF_ERR_Q" value="90"/> <!-- 180 believe Valkenburg was 140, 75, 55-->
    <define name="REF_ERR_R" value="90"/> <!-- 140 believe Valkenburg was 140, 75, 55-->
    <define name="REF_RATE_P" value="9.2"/> <!-- 14 believe Valkenburg was 10, 8, 4.5-->
    <define name="REF_RATE_Q" value="9.2"/> <!-- 14 believe Valkenburg was 10, 10, 5.5-->
    <define name="REF_RATE_R" value="19.4"/> <!-- 14 believe Valkenburg was 10, 10, 5.5 ## TRY 6.5-->

    <!--Maximum rates, to avoid instability-->
    <define name="MAX_P" value="100.0" unit="deg/s"/>
    <define name="MAX_Q" value="100.0" unit="deg/s"/>
    <define name="MAX_R" value="100.0" unit="deg/s"/>

    <define name="ESTIMATION_FILT_CUTOFF" value="4.0"/>
    <define name="FILT_CUTOFF" value="3.0"/>
    <define name="Filt_CUTOFF_P" value="10"/>
    <!--define name="FILT_CUTOFF_Q" value="20"/-->
    <define name="FILTER_PITCH_RATE" value="TRUE"/>
    <define name="2ORDER_QFILT_CUTOFF" value="3.0"/>
    <define name="FILT_CUTOFF_R" value="10"/>
    <!--<define name="FILT_CUTOFF" value="4.0"/>
    <define name="FILT_CUTOFF_R" value="3.2"/> -->

    <!-- first order actuator dynamics -->
    <!--<define name="ACT_DYN" value="{0.1, 0.1, 0.045, 0.045}"/>-->
    <!--<define name="ACT_DYN" value="{0.0982, 0.1192, 0.045, 0.045}"/>--> <!-- [0.05 0.05 0.045 0.045] before -->
    <define name="ACT_DYN" value="{0.0982, 0.1192, 0.03, 0.03, 0.05105, 0.05105}"/> <!-- [0.05 0.05 0.045 0.045] before -->
    <define name="ACT_RATE_LIMIT" value="{226.89, 226.89, 9600, 9600, 226.0, 226.0}"/>
    <define name="ACT_IS_SERVO" value="{1, 1, 0, 0, 1, 1}"/>

    <!-- Adaptive Learning Rate -->
    <define name="USE_ADAPTIVE" value="FALSE"/>
    <define name="ADAPTIVE_MU" value="0.0001"/>

    <define name="WLS_PRIORITIES" value="{1.0,1.0,1.0,1.0}"/>
    <define name="WLS_WU" value="{1.0,1.0,1.0,1.0,0.001,0.001}"/>

    <!-- Second order actuator dynamics -->
    <define name="SERVO_DELAY" value="0.014"/> <!-- [s] -->
    <define name="SERVO_2ND_ORD_NUM_1" value="0.0"/>
    <define name="SERVO_2ND_ORD_NUM_2" value="0.0117"/>
    <define name="SERVO_2ND_ORD_NUM_3" value="0.0108"/>
    <define name="SERVO_2ND_ORD_DEN_2" value="-1.7516"/>
    <define name="SERVO_2ND_ORD_DEN_3" value="0.7741"/>
    <!--<define name="SERVO_RATE_LIMIT" value="650"/> -->			<!-- [deg/s] -->

    <!-- Counter torque indifference -->
    <define name="COUNTER_TORQUE_INDIFFERENCE" value="FALSE"/>
    <define name="MOMENT_INERTIA_RATIO" value="0.004478"/>	<!-- ratio between MoI of tilt vs. rest of drone [total MoI minus one tilt]. Both measure around axis of servo. -->
    <define name="GRADIENT" value="0.0001"/>				<!-- gradient in linear relationship between pprz and angle (in rad), must be same as in 'ctrl_effectiveness_calc.c' -->

    <!-- Minimum throttle that can be assign to motors -->
    <define name="MIN_THROTTLE" value="4000"/>
    <define name="MIN_THROTTLE_FWD" value="2500"/>

    <!-- Maximum servo increment in PPRZ units -->
    <define name="MAX_SERVO_INCREMENT" value="4500"/>

    <define name="PIVOT_GAIN_Q" value="500"/>
    <define name="PIVOT_GAIN_THETA" value="450"/>
    <define name="PIVOT_SERVOGAIN_Q" value="0.0"/>
    <define name="PIVOT_SERVOGAIN_THETA" value="2.2"/>
  </section>

  <!-- Definitions for control effectiveness calculator module -->
  <section name="CONTROL_EFFECTIVENESS" prefix="CTRL_EFF_CALC_">
  	<define name="GROUND_CONTACT" value="0"/>
  	<define name="THRUST_LOWER_LIM" value="6000"/>

  	<!-- Drone specific metrics (You have a screenshot on 2022-10-18 ~21:15 with values from Valkenburg)-->
   	<define name="MASS" value="1.270"/>		<!--[kg]-->
   	<define name="I_XX" value="0.06617232"/>	<!--[kg m2] The cyclone value from jsbsim is 0.017897, currently using values from CAD files -->
   	<!--<define name="I_YY" value="0.04914925"/>-->	<!--[kg m2] The cyclone value from jsbsim is 0.003390, currently using values from CAD files -->
   	<define name="I_YY" value="0.015"/> <!-- 0.009 for valkenburg flights. 0.18, 0.04914925 -->
   	<define name="I_ZZ" value="0.03"/>	<!--[kg m2] 0.065 for valkenburg flights. The cyclone value from jsbsim is 0.020337, currently using values from CAD files -->
	    <!--<define name="I_XX" value="0.017897"/>	[kg m2] The cyclone value from jsbsim is 0.017897, currently using values from CAD files -->
   	<!--<define name="I_YY" value="0.003390"/>	[kg m2] The cyclone value from jsbsim is 0.003390, currently using values from CAD files -->
   	<!--<define name="I_ZZ" value="0.020337"/>	[kg m2] The cyclone value from jsbsim is 0.020337, currently using values from CAD files -->

   	<!-- Motor coefficients. Thrust as a function of ESC command (on range [0, 9600])
   	 	 Thrust equation of the form: T = k1 x^2 + k2 x + k3 -->
   	<define name="K1" value="0.00000005"/>
   	<define name="K2" value="0.0004"/>
   	<define name="K3" value="0.1175"/>

    <define name="CDA" value="0.04"/>
    <define name="CDA_OFFSET" value="0.0004"/>

    <define name="CDE" value="0.02"/>

 	<!-- Location of the pivot point of tilting motors w.r.t. the c.g. -->
   	<define name="Y_DIST" value="0.3"/>		<!--[m]-->
   	<define name="Z_DIST" value="0.135"/>	<!--[m]-->

   	<define name="MAPPING" value="0.0001"/>	<!--This the is mapping of PPRZ units to rads for the servos -->
  </section>

  <!-- Gains for vertical navigation -->
  <section name="GUIDANCE_V" prefix="GUIDANCE_V_">
    <define name="HOVER_KP" value="200"/>
    <define name="HOVER_KD" value="175"/>
    <define name="HOVER_KI" value="72"/>
    <define name="NOMINAL_HOVER_THROTTLE" value ="0.65"/>
    <define name="ADAPT_THROTTLE_ENABLED" value="FALSE"/>
  </section>

  <section name="NAV">
    <define name="NAV_CLIMB_VSPEED" value="1.5"/>
    <define name="NAV_DESCEND_VSPEED" value="-0.8"/>
  </section>

  <!--<section name="AHRS" prefix="AHRS_">-->
  <!--<define name="H_X" value="0.5138"/>-->
  <!--<define name="H_Y" value="0.00019"/>-->
  <!--<define name="H_Z" value="0.8578"/>-->
  <!--<define name="GRAVITY_HEURISTIC_FACTOR" value="0"/>-->
  <!--</section>-->

  <section name="INS" prefix="INS_">
    <!-- Delft -->
    <define name="H_X" value="0.3928"/>
    <define name="H_Y" value="-0.0140"/>
    <define name="H_Z" value="0.9195"/>
  </section>

  <!-- Gains for horizontal navigation-->
  <section name="GUIDANCE_H" prefix="GUIDANCE_H_">
    <define name="PGAIN" value="100"/>
    <define name="DGAIN" value="100"/>
    <define name="IGAIN" value="0"/>
  </section>

  <section name="MISC">
    <!--The Quadshot uses (when TRUE) a slightly different axis system for the setpoint, to make both hovering and flying forward intuitive-->
    <define name="USE_EARTH_BOUND_RC_SETPOINT" value="TRUE"/>
    <!-- This is the pitch angle that the Quadshot will have in forward flight, where 0 degrees is hover-->
    <define name="TRANSITION_MAX_OFFSET" value="-83.0" unit="deg"/>
    <define name="NO_RC_THRUST_LIMIT" value="TRUE"/>
    <define name="COORDINATED_TURN_AIRSPEED" value="18.0"/>

    <define name="BARO_PERIODIC_FREQUENCY" value="50"/>
    <define name="GUIDANCE_H_MAX_BANK" value="60" unit="deg"/>

    <!-- <define name="FWD_SIDESLIP_GAIN" value="0.32"/> -->
    <define name="FWD_SIDESLIP_GAIN_PILOTED" value="0.32"/> <!-- If guidance_hybrid_indi is being used, comment this out -->

    <!--<define name="EFF_SCHED_USE_FUNCTION" value="TRUE"/> -->    <!-- Think I need to get rid of this -->

    <define name="ARRIVED_AT_WAYPOINT" value="50.0"/>
    <define name="USE_AIRSPEED" value="TRUE"/>
  </section>

  <section name="SIMULATOR" prefix="NPS_">
    <define name="ACTUATOR_NAMES" value="tilt_left, tilt_right, mot_right, mot_left" type="string[]"/>
    <define name="JSBSIM_MODEL" value="tiltprop_skywalker" type="string"/>
    <define name="SENSORS_PARAMS" value="nps_sensors_params_default.h" type="string"/>
    <define name="NO_MOTOR_MIXING" value="TRUE"/>
  </section>

</airframe>